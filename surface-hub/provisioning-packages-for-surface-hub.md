---
title: Создание пакетов подготовки
description: Для Windows 10 или Windows 11 параметры, использующие реестр или поставщик служб конфигурации (CSP), можно настроить с помощью пакетов подготовки.
ms.assetid: 8AA25BD4-8A8F-4B95-9268-504A49BA5345
ms.reviewer: dpandre
manager: laurawi
keywords: добавление сертификата, пакет подготовки
ms.prod: surface-hub
ms.sitesec: library
author: dansimp
ms.author: dansimp
ms.topic: article
ms.date: 07/20/2021
ms.localizationpriority: medium
appliesto:
- Surface Hub
- Surface Hub 2S
ms.openlocfilehash: 1f1e084b8be0ab44c853fe003236ba7f25b4ff4c
ms.sourcegitcommit: e1d7782c2d205da9d1eb6b7aad0333350f2cb5a8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/29/2022
ms.locfileid: "12497642"
---
# <a name="create-provisioning-packages-for-surface-hub"></a>Создание пакетов подготовки для Surface Hub

Пакеты подготовки позволяют автоматизировать развертывание ключевых функций, помогая обеспечить согласованный интерфейс на всех устройствах Surface Hub в организации.  Используя Windows configuration Designer (WCD) на отдельном компьютере, можно выполнить следующие задачи:

- Регистрация в Active Directory или Azure Active Directory
- Создание учетной записи администратора устройства
- добавить приложения и сертификаты;
- настроить параметры прокси-сервера;
- добавить файл конфигурации Surface Hub.
- Настройка [параметров поставщика служб конфигурации (CSP)](/windows/client-management/mdm/surfacehub-csp)

## <a name="overview"></a>Обзор

1. На отдельном компьютере с Windows 10 или Windows 11 установите [Windows configuration Designer](https://www.microsoft.com/store/apps/9nblggh4tx22) из Microsoft Store.
1. Выберите [**"Surface Hub устройств"**](#use-surface-hub-provisioning-wizard), чтобы настроить общие параметры с помощью мастера. Или выберите ["Расширенная подготовка"](#use-advanced-provisioning) , чтобы просмотреть и настроить все возможные параметры.
1. Создайте пакет подготовки и сохраните его на USB-накопителе.
1. Разверните пакет в Surface Hub во время первой установки или с помощью Параметры приложения. Дополнительные сведения см [. в статье "Создание пакета подготовки"](/windows/configuration/provisioning-packages/provisioning-create-package).

## <a name="use-surface-hub-provisioning-wizard"></a>Использование Surface Hub подготовки

1. Откройте Windows конфигурации и выберите "Подготовка **Surface Hub устройств"**.<br>
    ![Используйте мастер Surface Hub подготовки.](images/sh-prov-start.png)
    
2. Приведите имя проекта и нажмите кнопку **"Далее"**.

### <a name="add-certificates"></a>Добавление сертификатов

> [!div class="mx-imgBorder"]
> ![добавить сертификат.](images/sh-prov-cert.png)

Чтобы подготовить устройство с сертификатом, выберите **"Добавить сертификат"**. Введите имя сертификата, а затем найдите нужный сертификат.  Дополнительные параметры подготовки см. в разделе ниже ["Добавление сертификата в пакет"](#add-a-certificate-to-your-package).

### <a name="configure-proxy-settings"></a>настроить параметры прокси-сервера;

> [!div class="mx-imgBorder"]
> ![настройка параметров прокси-сервера.](images/sh-prov-proxy.png)

1. Выберите **Да** или **Нет** для параметров прокси-сервера. По умолчанию Surface Hub автоматически обнаруживает параметры прокси-сервера. Тем не менее, если ранее инфраструктура требовала использование прокси-сервера, но теперь этого не требует, можно восстановить параметры по умолчанию для устройств Surface Hub с помощью пакета подготовки. Для этого выберите **Да** и **Автоматически определять параметры**.
2. Если вы нажмете кнопку **"** Да", можно выбрать автоматическое обнаружение параметров прокси-сервера или вручную настроить параметры, введя одно из следующих значений:

    - URL-адрес скрипта установки.
    - Сведения об адресе и порте статического прокси-сервера.

3. Если вы планируете использовать сценарий установки или прокси-сервер, отключите **автоматическое обнаружение параметров**. Можно использовать сценарий установки или *прокси-сервер* , а не оба.
4. Введите исключения (адреса, к Surface Hub должны подключаться напрямую без использования прокси-сервера). **Пример:** *.office365.com
5. Определите, следует ли использовать прокси-сервер для локальных адресов.

### <a name="set-up-device-admins"></a>Настройка администраторов устройств

 > [!div class="mx-imgBorder"]
 > ![Присоединитесь к Active Directory, Azure AD или создайте учетную запись локального администратора.](images/sh2-wcd.png)

Можно зарегистрировать устройство в Active Directory и указать группу безопасности, чтобы использовать приложение «Параметры», зарегистрироваться в Azure Active Directory, чтобы разрешить глобальным администраторам использовать приложение «Параметры», или создать учетную запись локального администратора на устройстве.

1. Для регистрации устройства в Active Directory введите учетные данные для учетной записи пользователя с минимальными правами, чтобы подключить устройство к домену, и укажите группу безопасности, чтобы использовать учетные данные администратора на Surface Hub. При применении пакета к Surface Hub, которая была сброшена, можно использовать ту же учетную запись домена, если это та же учетная запись, которая Surface Hub изначально. В противном случае необходимо использовать другую учетную запись домена в пакете подготовки.
2. Прежде чем использовать Windows конфигурации для настройки массовой регистрации Azure AD, спланируйте [реализацию Azure AD присоединения](/azure/active-directory/devices/azureadjoin-plan). Параметр **Максимальное количество устройств на одного пользователя** в клиенте Azure AD определяет, сколько раз можно использовать массовый маркер, полученный в мастере.
3. Для регистрации устройства в Azure AD, выберите соответствующий вариант и введите понятное имя для массового маркера, полученного с помощью мастера. Задайте дату окончания срока действия маркера (максимальное значение — 30 дней с даты получения маркера). Выберите **Получить массовый токен**. В окне **Выполнение входа в систему** введите учетную запись с разрешениями для присоединения устройства к Azure AD и пароль. Нажмите кнопку **Принять**, чтобы предоставить конструктору конфигураций Windows необходимые разрешения.
4. Чтобы создать учетную запись локального администратора, выберите соответствующий параметр и введите имя пользователя и пароль.

> [!IMPORTANT]
> Если вы создаете локальную учетную запись в пакете подготовки, необходимо изменять пароль с помощью приложения **Параметры** один раз в каждые 42 дня. Если пароль не меняется в течение этого периода, учетная запись может быть заблокирована и стать недоступной для входа.

### <a name="enroll-in-third-party-mdm-provider"></a>Регистрация в стороннем поставщике MDM

> [!div class="mx-imgBorder"]
> ![Регистрация в управлении мобильными устройствами сторонних производителей.](images/sh-prov-mdm.png)

При использовании стороннего поставщика управления мобильными устройствами (MDM) этот раздел можно использовать для регистрации Surface Hub. Чтобы зарегистрироваться в Intune, сначала настройте Azure AD, как описано в предыдущем разделе, и следуйте инструкциям в следующей документации Intune: Краткое руководство. Настройка автоматической регистрации для устройств [Windows 10/11](/mem/intune/enrollment/quickstart-setup-auto-enrollment).

1. Переключение **"Да** " или **"Нет** " для регистрации в сторонней MDM.
2. Если вы нажмите кнопку **"** Да", укажите учетную запись службы, пароль или отпечаток сертификата, который авторизован для регистрации устройства, и укажите тип проверки подлинности.
3. Если это требуется поставщику MDM, введите URL-адреса службы обнаружения, службы регистрации и службы политик.

 Дополнительные сведения см. в [статье "Управление Surface Hub с помощью поставщика MDM".](manage-settings-with-mdm-for-surface-hub.md)

### <a name="add-applications"></a>Добавление приложений

> [!div class="mx-imgBorder"]
> ![добавить приложение.](images/sh-prov-apps.png)

В пакете подготовки можно установить несколько приложений универсальной платформы Windows (UWP). Дополнительные сведения см [. в разделе "Подготовка компьютеров с приложениями"](/windows/configuration/provisioning-packages/provision-pcs-with-apps).

> [!NOTE]
> Хотя Windows configuration Designer позволяет добавить классическое приложение Win32 в пакет подготовки, Surface Hub принимает только приложения UWP. Если включить классическое приложение Win32, подготовка завершится ошибкой.

### <a name="add-a-configuration-file"></a>Добавление файла конфигурации

В дополнение к этому пакету подготовки можно использовать Surface Hub конфигурации, чтобы упростить настройку устройств. Файл Surface Hub конфигурации содержит список учетных записей устройств для подключения к Exchange, Microsoft Teams или Skype для бизнеса, а также "понятные имена" для беспроводной проекции.

**Чтобы создать файл Surface Hub конфигурации:**

1. Откройте Microsoft Excel (или другой редактор .csv), создайте .csv с именем _SurfaceHubConfiguration.csv_.

2. Введите список учетных записей устройств и понятных имен в следующем формате:

    ```
    <DeviceAccountName>,<DeviceAccountPassword>,<FriendlyName>
    ```

    > [!NOTE]
    > Файл конфигурации не должен содержать заголовки столбцов. При включении в пакет подготовки, примененный к Surface Hub, можно выбрать учетную запись и понятное имя устройства из файла. Чтобы создать файл .csv, используйте формат адреса имени участника-пользователя (rainier@contoso.com) или формат имени входа более высокого уровня (contoso\rainier).

    rainier@contoso.com,password,Rainier Surface Hub

3. Сохраните файл в папке проекта и скопируйте его в USB-ключ с пакетом подготовки.

> [!NOTE]
> Файл конфигурации можно применить только во время первого запуска установки.

### <a name="password-protect-provisioning-package"></a>Пакет подготовки защиты паролем

Если вы решили использовать пароль, вам потребуется вводить его каждый раз при применении пакета подготовки к устройству.

### <a name="complete-provisioning-wizard"></a>Мастер завершения подготовки

Если вам нужно настроить только общие параметры, выберите **FinishCreate** **** >  и перейдите к разделу ["Сборка пакета"](#build-your-package). Или продолжайте настройку параметров, переключитесь на расширенную подготовку.

## <a name="use-advanced-provisioning"></a>Использование расширенной подготовки

> [!TIP]
> Используйте мастер, чтобы создать пакет с общими параметрами, затем переключитесь в расширенный редактор, чтобы добавить другие параметры.<br><br> ![Переключитесь на расширенный редактор.](images/icd-simple-edit.png)

1. Если продолжить работу с предыдущим разделом, **** выберите "Переключиться в расширенный редактор", в **противном случае** откройте Windows и выберите "**Расширенная подготовка"**.

   ![Используйте расширенную подготовку.](images/sh-prov-adv.png)

2. Приведите имя проекта и нажмите кнопку **"Далее"**.

3. Выберите **"Windows 10 для совместной работы" и "** Далее **",** а затем нажмите кнопку **"Готово"**.

   ![Новый проект WCD.](images/icd-new-project.png)

4. В проекте в **разделе "Доступные настройки**" выберите **"Общие параметры команды"**.

   :::image type="content" alt-text="Общие параметры WCD." source="images/icd-common-settings.png":::

### <a name="add-a-certificate-to-your-package"></a>Добавление сертификата в пакет

Пакеты подготовки можно использовать для установки сертификатов, которые позволяют устройству проходить проверку подлинности в Microsoft Exchange.

> [!NOTE]
> Пакеты подготовки позволяют установить сертификаты только в хранилище устройства (на локальном компьютере), а не в хранилище пользователя. Если вашей организации требуется установить сертификаты в хранилище пользователей, используйте приложение Hub **Параметры**: Update **&** **SecurityCertificatesImport** >  >  Certificate.****
Кроме того, политики  [**MDM**](manage-settings-with-mdm-for-surface-hub.md) можно использовать для развертывания сертификатов в хранилище устройств или хранилище пользователей.

> [!TIP]
> Раздел **ClientCertificates** предназначен для PFX-файлов с закрытым ключом; CER-файлы для корневых ЦС следует поместить в раздел **RootCertificates** , а для промежуточных ЦС — в разделе **CACertificates** .

1. В **Windows configuration** **DesignerAvailable** **** >  >  перейдите к параметрам **среды выполненияCertificatesClientCertificates** > .****
2. Введите метку **для CertificateName и** нажмите кнопку **"Добавить"**.
3. Введите **CertificatePassword**.
4. Найдите и выберите сертификат, который следует использовать для **CertificatePath**.
5. Задайте значение **False** для параметра **ExportCertificate**.
6. Для параметра **KeyLocation** выберите значение **Только программное обеспечение**.

### <a name="add-a-uwp-app-to-your-package"></a>Добавление приложения UWP в пакет

Чтобы добавить приложение UWP в пакет подготовки, вам потребуется пакет приложения (APPX или APPXBUNDLE-файлы) и все файлы зависимостей. Если вы приобрели приложение в Microsoft Store для бизнеса, вам также потребуется *некодированная* лицензия на приложение. Информацию о загрузке этих элементов из Microsoft Store для бизнеса см. в статье [Распространение автономных приложений](/microsoft-store/distribute-offline-apps).

**Чтобы добавить приложение UWP:**

1. На панели **Доступные настройки** перейдите в раздел **Параметры среды выполнения** > **UniversalAppInstall** > **DeviceContextApp**.

2. Введите **PackageFamilyName** для приложения и нажмите кнопку **"Добавить"**. Для согласованности используйте имя семейства пакетов приложения. Если вы приобрели приложение в Microsoft Store для бизнеса, найти имя семейства пакетов можно в лицензии на приложение. Откройте файл лицензии с помощью текстового редактора и используйте значение между тегами PFM.

3. Для **ApplicationFile выберите** **"Обзор** ", чтобы найти и выбрать целевое приложение (APPX или APPXBUNDLE).

4. Для **dependencyAppxFiles** **нажмите кнопку** "Обзор", чтобы найти и добавить зависимости для приложения. Для Surface Hub потребуются только версии x64 этих зависимостей.

Если вы приобрели приложение из Microsoft Store для бизнеса, необходимо добавить лицензию приложения в пакет подготовки.

**Чтобы добавить лицензию приложения:**

1. Создайте копию лицензии на приложение и переименуйте ее с расширением **.ms-windows-store-license**. Например, переименуйте example.xml "example.ms-windows-store-license".

2. В Windows configuration Designer перейдите в раздел **Available customizationsRuntime** >  **settingsUniversalAppInstallDeviceContextAppLicense** > **** > .****

3. Введите **LicenseProductId** и нажмите кнопку **"Добавить"**. Для согласованности используйте идентификатор лицензии приложения из лицензии на приложение. Откройте файл лицензии в текстовом редакторе. Затем в **теге License** используйте значение **атрибута LicenseID** .

4. Выберите новый узел **LicenseProductId**. Для **LicenseInstall выберите "** Обзор", чтобы найти и выбрать переименованный файл лицензии (example.ms-windows-store-license).****

### <a name="add-a-policy-to-your-package"></a>Добавление политики в пакет

Surface Hub поддерживает подмножество политик в разделе [Поставщик служб конфигурации политик](/windows/client-management/mdm/policy-configuration-service-provider). Некоторые из этих политик можно настроить с помощью Windows конфигурации.

 **Чтобы добавить [политики CSP:](/windows/client-management/mdm/policies-in-policy-csp-supported-by-surface-hub)**

1. Перейдите **в раздел "Доступные параметры** **customizationsRuntime** >  **settingsPolicies** > ".
2. Выберите компонент, которым вы хотите управлять, и настройте соответствующий параметр политики. Например, чтобы запретить сотрудникам использовать веб-сайт InPrivate в Surface Hub, выберите **AllowInPrivate**, а затем выберите **"Отключить"**.  

   :::image type="content" alt-text="Настройка параметра политики." source="images/sh-prov-policies.png" lightbox="images/sh-prov-policies.png":::

### <a name="add-surface-hub-settings-to-your-package"></a>Добавление параметров Surface Hub в пакет

В пакет подготовки можно добавить параметры из раздела [Поставщик служб конфигурации SurfaceHub](/windows/client-management/mdm/surfacehub-csp).

1. Перейдите **в раздел Available customizationsCommon** >  **Team Edition Параметры**.
1. Выберите компонент, которым вы хотите управлять, и настройте соответствующий параметр политики.
1. Завершив настройку пакета подготовки, выберите **FileSave****** > .
1. Прочитайте предупреждение о том, что файлы проекта могут содержать конфиденциальную информацию, и нажмите кнопку **"ОК"**.

### <a name="build-your-package"></a>Сборка пакета

При создании пакета подготовки вы можете включить конфиденциальную информацию в файлы проекта и в файл пакета подготовки (PPKG). Несмотря на то что у вас есть возможность шифрования PPKG-файла, файлы проекта не шифруются.  Храните файлы проекта в безопасном месте или удаляйте их, если они больше не нужны.

1. Откройте **Windows Configuration** **DesignerExportProvisioning** >  > .****

2. **Смена владельца на** **ИТ-администратора**.  

3. Установите значение для параметра **Версия пакета**, а затем нажмите кнопку **Далее.**

   > [!TIP]
   > Установка владельца для ИТ-администратора гарантирует, что параметры пакета поддерживают соответствующие "свойства приоритета" и остаются в Surface Hub, если другие пакеты подготовки впоследствии применяются из других источников.

   > [!TIP]
   > Вы можете изменить существующие пакеты и изменить номер версии, чтобы обновить ранее примененные пакеты.

4. Необязательно. Вы можете зашифровать пакет и включить подписывание пакета:

    1. Выберите **"Шифровать пакет** " и введите пароль.
    1. Выберите **"Подписать** **packageBrowse** > " и выберите сертификат соответствующим образом.

    > [!IMPORTANT]
    > Рекомендуется включить доверенный сертификат подготовки в пакет подготовки. При применении пакета к устройству сертификат добавляется в системное хранилище, что позволяет применять последующие пакеты автоматически.

5. Выберите **"Далее** ", чтобы указать расположение выходных данных. По умолчанию конструктор конфигураций Windows использует в качестве расположения выходных данных папку проекта. Или нажмите **кнопку "** Обзор", чтобы изменить расположение выходных данных по умолчанию. Выберите **Далее**.

6. Выберите **"Сборка** ", чтобы начать сборку пакета. Сведения о проекте отображаются на странице сборки.

7. В случае сбоя сборки появится сообщение об ошибке со ссылкой на папку проекта. Просмотрите журналы, чтобы диагностировать ошибку, и повторите попытку сборки пакета.

8. Если сборка будет выполнена успешно, отобразится имя пакета подготовки, выходного каталога и каталога проекта. Нажмите **кнопку "** Готово", чтобы закрыть мастер и вернуться на страницу "Настройки".

9. Выберите  **расположение выходных**  данных, чтобы перейти к расположению пакета. Копируйте PPKG-файл на пустой USB-накопитель флэш-памяти.

## <a name="apply-a-provisioning-package-to-surface-hub"></a>Применение пакета подготовки на устройстве Surface Hub

Существует два способа развертывания пакетов подготовки в Surface Hub:

- [Настройка первого запуска.](#apply-a-provisioning-package-during-first-run) Вы можете применить пакет подготовки для настройки нескольких параметров, включая параметры Wi-Fi, параметры прокси-сервера, сведения об учетной записи устройства, Azure AD присоединения и связанные параметры.  
- [Параметры приложения.](#apply-a-provisioning-package-using-settings-app) После первого запуска программы установки можно применить пакет подготовки с помощью Параметры приложения. 

### <a name="apply-a-provisioning-package-during-first-run"></a>Применение пакета подготовки при первом запуске

1. При первом включении Surface Hub программа при первом запуске отображает страницу [**приветствия**](first-run-program-surface-hub.md). Перед продолжением убедитесь, что параметры настроены правильно.

2. Вставьте USB-устройство флэш-памяти с PPKG-файлом в Surface Hub. Если пакет находится в корневом каталоге диска, программа первого запуска распознает его и спросит, требуется ли настроить устройство. Выберите **Настройка**.

3. На следующем экране появляется запрос о выборе источника подготовки. Выберите **Съемный носитель** и коснитесь **Далее**.

4. Выберите пакет подготовки (*.ppkg), который вы хотите применить, и нажмите кнопку **"Далее"**. Обратите внимание, что вы можете установить только один пакет во время первого запуска.

5. В программе первого запуска отобразится сводка изменений, которые будут внесены с помощью пакета подготовки. Выберите **Да, добавить**.

6. Если файл конфигурации включен в корневой каталог USB-накопителя, вы увидите параметр **Выбор конфигурации**. Первая учетная запись устройства в файле конфигурации будет отображаться вместе со сводными данными учетной записи, которые будут применяться к Surface Hub.

7. В **разделе "Выбор конфигурации**" выберите имя устройства для применения, а затем нажмите кнопку **"Далее"**.

К устройству будут применены параметры из пакета подготовки и первый запуск будет завершен. После перезагрузки устройства можно удалить USB-накопитель.

### <a name="apply-a-provisioning-package-using-settings-app"></a>Применение пакета подготовки с помощью Параметры приложения

1. Вставьте USB-устройство флэш-памяти с PPKG-файлом в Surface Hub.
2. В Surface Hub начните **Параметры** и при появлении запроса введите учетные данные администратора.
3. Перейдите к **Surface Hub** > **Управление устройствами**. В **разделе "Пакеты подготовки**" выберите **"Добавить или удалить пакет подготовки** > **"**.
4. Выберите пакет подготовки и щелкните **Добавить**.  При появлении запроса снова введите учетные данные администратора.
5. Вы увидите сводку применяемых изменений. Выберите **Да, добавить**.

## <a name="learn-more"></a>Подробнее

- [Скачивание Windows configuration Designer](https://www.microsoft.com/store/apps/9nblggh4tx22)
- [Создание пакета подготовки](/windows/configuration/provisioning-packages/provisioning-create-package)
- [Управление Surface Hub с помощью поставщика MDM](manage-settings-with-mdm-for-surface-hub.md)
